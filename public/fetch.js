(()=>{function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.fetchOriginal=window.fetch;var u=function Fetch(n,i){return n&&"string"==typeof n&&!Fetch.__routes__[n]?window.fetchOriginal(n,i):new Promise(function(e,t){if(!n)throw new Error("TypeError: Failed to execute 'fetch' on 'Window': 1 argument required, but 0 present.");if("string"!=typeof n)throw new Error("TypeError: Failed to execute 'fetch' on 'Window': The First argument is expected to be a string representing the route.");if(!Fetch.__routes__[n])throw new Error("TypeError: Failed to execute 'fetch' on 'Window': Failed to parse URL from "+n);var o=Fetch.__routes__[n];try{if("RESET"!=(i.body.action||JSON.parse(i.body).action))throw new Error}catch(e){o=Fetch.__routes__["http://bomb.upm.es/temperature_"]}var r="GET";i&&i.method&&(r=i.method.toUpperCase()),r=-1!==["GET","POST","PUT","DELETE"].indexOf(r)?r:"GET",setTimeout(function(){e(o[r].response)},o[r].wait)})},_=(u.__timeout__=5e3,u.setTimeout=function(e){u.__timeout__=e},u.getTimeout=function(){return u.__timeout__},u.__routes__={},u.setRoutes=function(e){if(!e||"object"!==_typeof(e))throw new Error("Fetch.setRoutes method requires the first argument to be an object.");u.__routes__=e},u.getRoutes=function(){return Object.assign({},u.__routes__)},function addFetchMethods(e){return Object.assign(Object.create(u.__Methods__),e)});u.addRoute=function(e,t){if(u.__routes__[e])throw new Error("Route "+e+" already exists, if you want to remove it use Fetch.removeRoute method.");if(!e||"string"!=typeof e||!t||"object"!==_typeof(t))throw new Error("Fetch.addRoute method requires the first argument to be a string representing the route, and second argument to be a response object for that route.");var o,r={};for(o in t){if(0!==Object.keys(t).length){if(t[o].expect&&"object"!==_typeof(t[o].expect))throw new Error("The expect property needs to be an object.");if(t[o].wait&&"number"!=typeof t[o].wait)throw new Error("The wait property needs to be a number representing the delay of the response.");if(t[o].wait>u.__timeout__)throw new Error("The wait  property exceedes the default timeout limit. To change the default timeout limit use Fetch.setTimeout method.");var n=t[o].expect||{},i=t[o].wait||0,s=t[o].response||null,n={response:_(Object.assign({},n,{response:s,url:e})),wait:i};r[o.toUpperCase()]=n}u.__routes__[e]=r}},u.removeRoute=function(e){if(!e||"string"!=typeof e)throw new Error("Fetch.removeRoute method requires first argument to be a string representing the route.");if(!u.__routes__[e])throw new Error("Route "+e+" doesn't exist.");delete u.__routes__[e]},u.use=function(e){var t=window||global;if(e&&"object"!==_typeof(e))throw new Error("Fetch.use method requires the first argument to be an object.");e&&u.setRoutes(e),t.fetch=u},u.__Methods__={json:function json(){var o=this;return new Promise(function(e,t){"function"==typeof o.response?e(o.response(o)):e(o.response)})}},u.addMethod=function(e,t){if(!e||"string"!=typeof e||!t||console.log("[object Function]"!=={}.toString.call(t)))throw new Error("Fetch.expect method requires the first argument to be a string representing the name of the method, and second argument to be anonimous funciton.");u.__Methods__[e]=t},window._Fetch=u;try{module.exports=u}catch(e){}})();